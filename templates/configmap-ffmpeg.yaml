apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ include "live-stream-packager.fullname" . }}-ffmpeg
  labels:
    {{- include "live-stream-packager.labels" . | nindent 4 }}
    app.kubernetes.io/component: transcoder
data:
  ffmpegOptions: {{ .Values.ffmpeg.ffmpegOptions | quote }}
  {{- if .Values.udpInput.enabled }}
  inputSourceUrl: {{ printf "udp://0.0.0.0:%d" (int .Values.udpInput.port) | quote }}
  {{- else }}
  inputSourceUrl: {{ .Values.ffmpeg.inputSourceUrl | quote }}
  {{- end }}
  encodingOptions: |
{{ .Values.ffmpeg.encodingOptions | indent 4 }}
